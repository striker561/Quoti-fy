import { getPosition } from "./positionUtils";
import { fitTextToBox } from "./fitTextToBox";

type Position = "top-left"
    | "top-right"
    | "bottom-left"
    | "bottom-right"
    | "center"
    | "left"
    | "right"
    | "top"
    | "bottom";

interface OverlayOptions {
    text: string;
    textColor?: string;
    width: number;
    height: number;
    position?: Position;
    addBackground?: boolean;
}

export function generateOverlaySvg({
    text,
    width,
    height,
    position = "bottom",
    addBackground = true,
    textColor = "#ffffff",
}: OverlayOptions): Buffer {
    const { lines: fittedLines, fontSize } = fitTextToBox(
        text,
        width,
        height,
    );
    const { x, y, anchor } = getPosition(position, width, height, fittedLines.length, fontSize);

    const bg = addBackground
        ? `<rect x="0" y="${y - fontSize}" width="${width}" height="${(fittedLines.length + 1) * fontSize}" fill="rgba(0,0,0,0.4)" />`
        : "";

    // Escape XML characters in text
    const svgLines = fittedLines
        .map((line, i) => {
            const escapedLine = line
                .replace(/&/g, '&amp;')
                .replace(/</g, '&lt;')
                .replace(/>/g, '&gt;')
                .replace(/"/g, '&quot;')
                .replace(/'/g, '&#39;');
            return `<text x="${x}" y="${y + i * fontSize}" text-anchor="${anchor}" class="quote">${escapedLine}</text>`;
        })
        .join("");

    const fontBase64 = "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";

    const svg = `
    <svg width="${width}" height="${height}" xmlns="http://www.w3.org/2000/svg">
      <defs>
        <style>
          <![CDATA[
          @font-face {
            font-family: 'EmbeddedFont';
            src: url('data:font/woff2;base64,${fontBase64}') format('woff2');
            font-weight: bold;
            font-style: normal;
          }
          .quote {
            fill: ${textColor};
            font-size: ${fontSize}px;
            font-family: 'EmbeddedFont', 'Arial', 'Helvetica', sans-serif;
            font-weight: bold;
            stroke: rgba(0, 0, 0, 0.8);
            stroke-width: 2px;
            stroke-linejoin: round;
            stroke-linecap: round;
            paint-order: stroke fill;
            text-rendering: optimizeLegibility;
            letter-spacing: 0.5px;
          }
          ]]>
        </style>
      </defs>
      ${bg}
      ${svgLines}
    </svg>
  `;

    return Buffer.from(svg);
}